{"ast":null,"code":"var _jsxFileName = \"/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class SearchBook extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      query: \"\",\n      showingBooks: [],\n      error: undefined\n    };\n\n    this.onUpdateQuery = e => {\n      const query = e.target.value;\n      this.setState({\n        query: query,\n        error: undefined\n      });\n      this.SearchBook(query.trim());\n    };\n\n    this.SearchBook = debounce(query => {\n      if (!query) {\n        this.setState({\n          showingBooks: []\n        });\n        return;\n      }\n\n      BooksAPI.search(query).then(books => {\n        if (!books || books.error) {\n          this.setState({\n            showingBooks: [],\n            error: \"No books were found, Please try another word\"\n          });\n          return;\n        }\n\n        books = books.map(book => {\n          const bookOnShelf = this.props.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n        this.setState({\n          showingBooks: books\n        });\n      }).catch(err => {\n        this.setState({\n          showingBooks: [],\n          error: \"There was an error searching for books, please check your connection\"\n        });\n      });\n    }, 300);\n  }\n\n  render() {\n    const {\n      query,\n      showingBooks,\n      error\n    } = this.state;\n    const {\n      changeBookShelf\n    } = this.props;\n    const {\n      onUpdateQuery\n    } = this;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-bar\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"close-search\",\n          to: \"/\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-books-input-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: onUpdateQuery,\n            value: query,\n            type: \"text\",\n            placeholder: \"Search by title or author\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-results\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"books-grid\",\n          children: showingBooks.length ? showingBooks.map(book => /*#__PURE__*/_jsxDEV(Book, {\n            changeBookShelf: changeBookShelf,\n            book: book\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 19\n          }, this)) : query && error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nSearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};","map":{"version":3,"names":["React","Component","PropTypes","Link","debounce","BooksAPI","Book","SearchBook","state","query","showingBooks","error","undefined","onUpdateQuery","e","target","value","setState","trim","search","then","books","map","book","bookOnShelf","props","myBooks","find","b","id","shelf","catch","err","render","changeBookShelf","length","propTypes","array","isRequired","func"],"sources":["/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\n\nexport default class SearchBook extends Component {\n  static propTypes = {\n    myBooks: PropTypes.array.isRequired,\n    changeBookShelf: PropTypes.func.isRequired\n  };\n  state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  onUpdateQuery = e => {\n    const query = e.target.value;\n    this.setState({\n      query: query,\n      error: undefined\n    });\n    this.SearchBook(query.trim());\n  };\n  SearchBook = debounce(query => {\n    if (!query) {\n      this.setState({ showingBooks: [] });\n      return;\n    }\n    BooksAPI.search(query)\n      .then(books => {\n        if (!books || books.error) {\n          this.setState({\n            showingBooks: [],\n            error: \"No books were found, Please try another word\"\n          });\n          return;\n        }\n        books = books.map(book => {\n          const bookOnShelf = this.props.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n        this.setState({ showingBooks: books });\n      })\n      .catch(err => {\n        this.setState({\n          showingBooks: [],\n          error:\n            \"There was an error searching for books, please check your connection\"\n        });\n      });\n  }, 300);\n  render() {\n    const { query, showingBooks, error } = this.state;\n    const { changeBookShelf } = this.props;\n    const { onUpdateQuery } = this;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link className=\"close-search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={onUpdateQuery}\n              value={query}\n              type=\"text\"\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {showingBooks.length\n              ? showingBooks.map(book => (\n                  <Book\n                    changeBookShelf={changeBookShelf}\n                    key={book.id}\n                    book={book}\n                  />\n                ))\n              : query && error && <p className=\"error\">{error}</p>}\n          </ol>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}