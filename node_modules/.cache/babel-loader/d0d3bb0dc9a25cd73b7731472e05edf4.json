{"ast":null,"code":"import _readOnlyError from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nvar SearchBooks = function SearchBooks(_ref) {\n  var prop = _ref.prop;\n  var state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  (function (event) {\n    var query = event.target.value;\n    prop.setState({\n      query: query,\n      error: undefined\n    });\n    prop.searchBooks(query.trim());\n  }), _readOnlyError(\"onUpdateQuery\");\n  prop.searchBooks = debounce(function (query) {\n    if (!query) {\n      prop.setState({\n        showingBooks: []\n      });\n      return;\n    }\n\n    BooksAPI.search(query).then(function (books) {\n      if (!books || books.error) {\n        prop.setState({\n          showingBooks: [],\n          error: \"No books were found, please change your search term\"\n        });\n        return;\n      }\n\n      books = books.map(function (book) {\n        var bookOnShelf = prop.myBooks.find(function (b) {\n          return b.id === book.id;\n        });\n        book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n        return book;\n      });\n      prop.setState({\n        showingBooks: books\n      });\n    }).catch(function (err) {\n      prop.setState({\n        showingBooks: [],\n        error: \"There was an error searching for books, please check your connection\"\n      });\n    });\n  }, 300); //render()\n  //{\n\n  var _this$state = _this.state,\n      query = _this$state.query,\n      showingBooks = _this$state.showingBooks,\n      error = _this$state.error;\n  var changeBookShelf = _this.props.changeBookShelf;\n  var onUpdateQuery = _this.onUpdateQuery;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-bar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"close-search\",\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-input-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: onUpdateQuery,\n    value: query,\n    type: \"text\",\n    placeholder: \"Search by title or author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-results\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ol\", {\n    className: \"books-grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, showingBooks.length ? showingBooks.map(function (book) {\n    return /*#__PURE__*/React.createElement(Book, {\n      changeBookShelf: changeBookShelf,\n      key: book.id,\n      book: book,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    });\n  }) : query && error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 35\n    }\n  }, error)))); //}\n};\n\nSearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport default SearchBook;","map":{"version":3,"names":["React","Component","PropTypes","Link","debounce","BooksAPI","Book","SearchBooks","prop","state","query","showingBooks","error","undefined","event","target","value","setState","searchBooks","trim","search","then","books","map","book","bookOnShelf","myBooks","find","b","id","shelf","catch","err","changeBookShelf","props","onUpdateQuery","length","SearchBook","propTypes","array","isRequired","func"],"sources":["/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nconst SearchBooks=({prop})=> {\n\n  const state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  onUpdateQuery = event => {\n    const query = event.target.value;\n    prop.setState({\n      query: query,\n      error: undefined\n    });\n    prop.searchBooks(query.trim());\n  };\n  prop.searchBooks = debounce(query => {\n    if (!query) {\n      prop.setState({ showingBooks: [] });\n      return;\n    }\n    BooksAPI.search(query)\n      .then(books => {\n        if (!books || books.error) {\n          prop.setState({\n            showingBooks: [],\n            error: \"No books were found, please change your search term\"\n          });\n          return;\n        }\n        books = books.map(book => {\n          const bookOnShelf = prop.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n      prop.setState({ showingBooks: books });\n      })\n      .catch(err => {\n        prop.setState({\n          showingBooks: [],\n          error:\n            \"There was an error searching for books, please check your connection\"\n        });\n      });\n  }, 300);\n  //render()\n  //{\n    const { query, showingBooks, error } = this.state;\n   const { changeBookShelf } = this.props;\n  const { onUpdateQuery } = this;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link className=\"close-search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={onUpdateQuery}\n              value={query}\n              type=\"text\"\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {showingBooks.length\n              ? showingBooks.map(book => (\n                  <Book\n                    changeBookShelf={changeBookShelf}\n                    key={book.id}\n                    book={book}\n                  />\n                ))\n              : query && error && <p className=\"error\">{error}</p>}\n          </ol>\n        </div>\n      </div>\n    );\n  //}\n};\nSearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport default SearchBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}