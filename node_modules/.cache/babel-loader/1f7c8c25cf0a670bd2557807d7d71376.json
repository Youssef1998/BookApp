{"ast":null,"code":"import _classCallCheck from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nvar SearchBooks = /*#__PURE__*/function (_Component) {\n  _inherits(SearchBooks, _Component);\n\n  function SearchBooks() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SearchBooks);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SearchBooks)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      query: \"\",\n      showingBooks: [],\n      error: undefined\n    };\n\n    _this.onUpdateQuery = function (e) {\n      var query = e.target.value;\n\n      _this.setState({\n        query: query,\n        error: undefined\n      });\n\n      _this.searchBooks(query.trim());\n    };\n\n    _this.searchBooks = debounce(function (query) {\n      if (!query) {\n        _this.setState({\n          showingBooks: []\n        });\n\n        return;\n      }\n\n      BooksAPI.search(query).then(function (books) {\n        if (!books || books.error) {\n          _this.setState({\n            showingBooks: [],\n            error: \"No books were found, please change your search term\"\n          });\n\n          return;\n        }\n\n        books = books.map(function (book) {\n          var bookOnShelf = _this.props.myBooks.find(function (b) {\n            return b.id === book.id;\n          });\n\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n\n        _this.setState({\n          showingBooks: books\n        });\n      }).catch(function (err) {\n        _this.setState({\n          showingBooks: [],\n          error: \"There was an error searching for books, please check your connection\"\n        });\n      });\n    }, 300);\n    return _this;\n  }\n\n  _createClass(SearchBooks, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          query = _this$state.query,\n          showingBooks = _this$state.showingBooks,\n          error = _this$state.error;\n      var changeBookShelf = this.props.changeBookShelf;\n      var onUpdateQuery = this.onUpdateQuery;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-books\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-books-bar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        className: \"close-search\",\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, \"Close\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-books-input-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        onChange: onUpdateQuery,\n        value: query,\n        type: \"text\",\n        placeholder: \"Search by title or author\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-books-results\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ol\", {\n        className: \"books-grid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }, showingBooks.length ? showingBooks.map(function (book) {\n        return /*#__PURE__*/React.createElement(Book, {\n          changeBookShelf: changeBookShelf,\n          key: book.id,\n          book: book,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 19\n          }\n        });\n      }) : query && error && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 35\n        }\n      }, error))));\n    }\n  }]);\n\n  return SearchBooks;\n}(Component);\n\nSearchBooks.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport { SearchBooks as default };","map":{"version":3,"names":["React","Component","PropTypes","Link","debounce","BooksAPI","Book","SearchBooks","state","query","showingBooks","error","undefined","onUpdateQuery","e","target","value","setState","searchBooks","trim","search","then","books","map","book","bookOnShelf","props","myBooks","find","b","id","shelf","catch","err","changeBookShelf","length","propTypes","array","isRequired","func"],"sources":["/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nexport default class SearchBooks extends Component {\n  static propTypes = {\n    myBooks: PropTypes.array.isRequired,\n    changeBookShelf: PropTypes.func.isRequired\n  };\n  state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  onUpdateQuery = e => {\n    const query = e.target.value;\n    this.setState({\n      query: query,\n      error: undefined\n    });\n    this.searchBooks(query.trim());\n  };\n  searchBooks = debounce(query => {\n    if (!query) {\n      this.setState({ showingBooks: [] });\n      return;\n    }\n    BooksAPI.search(query)\n      .then(books => {\n        if (!books || books.error) {\n          this.setState({\n            showingBooks: [],\n            error: \"No books were found, please change your search term\"\n          });\n          return;\n        }\n        books = books.map(book => {\n          const bookOnShelf = this.props.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n        this.setState({ showingBooks: books });\n      })\n      .catch(err => {\n        this.setState({\n          showingBooks: [],\n          error:\n            \"There was an error searching for books, please check your connection\"\n        });\n      });\n  }, 300);\n  render() {\n    const { query, showingBooks, error } = this.state;\n    const { changeBookShelf } = this.props;\n    const { onUpdateQuery } = this;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link className=\"close-search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={onUpdateQuery}\n              value={query}\n              type=\"text\"\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {showingBooks.length\n              ? showingBooks.map(book => (\n                  <Book\n                    changeBookShelf={changeBookShelf}\n                    key={book.id}\n                    book={book}\n                  />\n                ))\n              : query && error && <p className=\"error\">{error}</p>}\n          </ol>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}