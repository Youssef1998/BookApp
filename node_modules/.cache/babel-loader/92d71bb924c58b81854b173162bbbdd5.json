{"ast":null,"code":"var _jsxFileName = \"/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SearchBook = _ref => {\n  let {\n    prop\n  } = _ref;\n  const state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n\n  onUpdateQuery = event => {\n    const query = event.target.value;\n    prop.setState({\n      query: query,\n      error: undefined\n    });\n    prop.searchBooks(query.trim());\n  };\n\n  prop.searchBooks = debounce(query => {\n    if (!query) {\n      prop.setState({\n        showingBooks: []\n      });\n      return;\n    }\n\n    BooksAPI.search(query).then(books => {\n      if (!books || books.error) {\n        prop.setState({\n          showingBooks: [],\n          error: \"No books were found, please change your search term\"\n        });\n        return;\n      }\n\n      books = books.map(book => {\n        const bookOnShelf = prop.myBooks.find(b => b.id === book.id);\n        book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n        return book;\n      });\n      prop.setState({\n        showingBooks: books\n      });\n    }).catch(err => {\n      prop.setState({\n        showingBooks: [],\n        error: \"There was an error searching for books, please check your connection\"\n      });\n    });\n  }, 300); //render()\n  //{\n\n  const {\n    query,\n    showingBooks,\n    error\n  } = this.state;\n  const {\n    changeBookShelf\n  } = this.props;\n  const {\n    onUpdateQuery\n  } = this;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-books\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books-bar\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"close-search\",\n        to: \"/\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-input-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: onUpdateQuery,\n          value: query,\n          type: \"text\",\n          placeholder: \"Search by title or author\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books-results\",\n      children: /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"books-grid\",\n        children: showingBooks.length ? showingBooks.map(book => /*#__PURE__*/_jsxDEV(Book, {\n          changeBookShelf: changeBookShelf,\n          book: book\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this)) : query && error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 35\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 7\n  }, this); //}\n};\n\n_c = SearchBook;\nSearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport default SearchBook;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchBook\");","map":{"version":3,"names":["React","PropTypes","Link","debounce","BooksAPI","Book","SearchBook","prop","state","query","showingBooks","error","undefined","onUpdateQuery","event","target","value","setState","searchBooks","trim","search","then","books","map","book","bookOnShelf","myBooks","find","b","id","shelf","catch","err","changeBookShelf","props","length","propTypes","array","isRequired","func"],"sources":["/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport Book from \"./Book\";\n\nconst SearchBook=({prop})=> {\n\n  const state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  onUpdateQuery = event => {\n    const query = event.target.value;\n    prop.setState({\n      query: query,\n      error: undefined\n    });\n    prop.searchBooks(query.trim());\n  };\n  prop.searchBooks = debounce(query => {\n    if (!query) {\n      prop.setState({ showingBooks: [] });\n      return;\n    }\n    BooksAPI.search(query)\n      .then(books => {\n        if (!books || books.error) {\n          prop.setState({\n            showingBooks: [],\n            error: \"No books were found, please change your search term\"\n          });\n          return;\n        }\n        books = books.map(book => {\n          const bookOnShelf = prop.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n      prop.setState({ showingBooks: books });\n      })\n      .catch(err => {\n        prop.setState({\n          showingBooks: [],\n          error:\n            \"There was an error searching for books, please check your connection\"\n        });\n      });\n  }, 300);\n  //render()\n  //{\n    const { query, showingBooks, error } = this.state;\n   const { changeBookShelf } = this.props;\n  const { onUpdateQuery } = this;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link className=\"close-search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={onUpdateQuery}\n              value={query}\n              type=\"text\"\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {showingBooks.length\n              ? showingBooks.map(book => (\n                  <Book\n                    changeBookShelf={changeBookShelf}\n                    key={book.id}\n                    book={book}\n                  />\n                ))\n              : query && error && <p className=\"error\">{error}</p>}\n          </ol>\n        </div>\n      </div>\n    );\n  //}\n};\nSearchBook.propTypes={\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\n\nexport default SearchBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}