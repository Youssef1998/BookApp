{"ast":null,"code":"import _readOnlyError from \"/Users/youssefahmed/nd0191-c1-myreads/starter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nvar SearchBooks = function SearchBooks(_ref) {\n  var prop = _ref.prop;\n  var _state = state,\n      query = _state.query,\n      showingBooks = _state.showingBooks,\n      error = _state.error;\n  var _props = props,\n      changeBookShelf = _props.changeBookShelf;\n  var onUpdateQuery = _this.onUpdateQuery;\n  state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  (function (event) {\n    var query = event.target.value;\n    setState({\n      query: query,\n      error: undefined\n    });\n    searchBooks(query.trim());\n  }), _readOnlyError(\"onUpdateQuery\");\n  searchBooks = debounce(function (query) {\n    if (!query) {\n      setState({\n        showingBooks: []\n      });\n      return;\n    }\n\n    BooksAPI.search(query).then(function (books) {\n      if (!books || books.error) {\n        setState({\n          showingBooks: [],\n          error: \"No books were found, please change your search term\"\n        });\n        return;\n      }\n\n      books = books.map(function (book) {\n        var bookOnShelf = props.myBooks.find(function (b) {\n          return b.id === book.id;\n        });\n        book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n        return book;\n      });\n      setState({\n        showingBooks: books\n      });\n    }).catch(function (err) {\n      setState({\n        showingBooks: [],\n        error: \"There was an error searching for books, please check your connection\"\n      });\n    });\n  }, 300); //render()\n  //{\n  //  const { query, showingBooks, error } = state;\n  // const { changeBookShelf } = props;\n  //  const { onUpdateQuery } = ;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-bar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"close-search\",\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-input-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: onUpdateQuery,\n    value: query,\n    type: \"text\",\n    placeholder: \"Search by title or author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-books-results\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ol\", {\n    className: \"books-grid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, showingBooks.length ? showingBooks.map(function (book) {\n    return /*#__PURE__*/React.createElement(Book, {\n      changeBookShelf: changeBookShelf,\n      key: book.id,\n      book: book,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 19\n      }\n    });\n  }) : query && error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 35\n    }\n  }, error)))); //}\n};\n\nSearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport default SearchBook;","map":{"version":3,"names":["React","Component","PropTypes","Link","debounce","BooksAPI","Book","SearchBooks","prop","state","query","showingBooks","error","props","changeBookShelf","onUpdateQuery","undefined","event","target","value","setState","searchBooks","trim","search","then","books","map","book","bookOnShelf","myBooks","find","b","id","shelf","catch","err","length","SearchBook","propTypes","array","isRequired","func"],"sources":["/Users/youssefahmed/nd0191-c1-myreads/starter/src/SearchBook.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link } from \"react-router-dom\";\nimport { debounce } from \"lodash\";\nimport * as BooksAPI from \"../utils/BooksAPI\";\nimport Book from \"./Book\";\n\nconst SearchBooks=({prop})=> {\n  const { query, showingBooks, error } = state;\n   const { changeBookShelf } = props;\n    const { onUpdateQuery } = this;\n  state = {\n    query: \"\",\n    showingBooks: [],\n    error: undefined\n  };\n  onUpdateQuery = event => {\n    const query = event.target.value;\n    setState({\n      query: query,\n      error: undefined\n    });\n    searchBooks(query.trim());\n  };\n  searchBooks = debounce(query => {\n    if (!query) {\n      setState({ showingBooks: [] });\n      return;\n    }\n    BooksAPI.search(query)\n      .then(books => {\n        if (!books || books.error) {\n          setState({\n            showingBooks: [],\n            error: \"No books were found, please change your search term\"\n          });\n          return;\n        }\n        books = books.map(book => {\n          const bookOnShelf = props.myBooks.find(b => b.id === book.id);\n          book.shelf = bookOnShelf ? bookOnShelf.shelf : \"none\";\n          return book;\n        });\n      setState({ showingBooks: books });\n      })\n      .catch(err => {\n        setState({\n          showingBooks: [],\n          error:\n            \"There was an error searching for books, please check your connection\"\n        });\n      });\n  }, 300);\n  //render()\n  //{\n  //  const { query, showingBooks, error } = state;\n  // const { changeBookShelf } = props;\n  //  const { onUpdateQuery } = ;\n    return (\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link className=\"close-search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              onChange={onUpdateQuery}\n              value={query}\n              type=\"text\"\n              placeholder=\"Search by title or author\"\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {showingBooks.length\n              ? showingBooks.map(book => (\n                  <Book\n                    changeBookShelf={changeBookShelf}\n                    key={book.id}\n                    book={book}\n                  />\n                ))\n              : query && error && <p className=\"error\">{error}</p>}\n          </ol>\n        </div>\n      </div>\n    );\n  //}\n}\n SearchBook.propTypes = {\n  myBooks: PropTypes.array.isRequired,\n  changeBookShelf: PropTypes.func.isRequired\n};\nexport default SearchBook;\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,QAAT,QAAyB,QAAzB;AACA,OAAO,KAAKC,QAAZ,MAA0B,mBAA1B;AACA,OAAOC,IAAP,MAAiB,QAAjB;;AAEA,IAAMC,WAAW,GAAC,SAAZA,WAAY,OAAW;EAAA,IAATC,IAAS,QAATA,IAAS;EAAA,aACYC,KADZ;EAAA,IACnBC,KADmB,UACnBA,KADmB;EAAA,IACZC,YADY,UACZA,YADY;EAAA,IACEC,KADF,UACEA,KADF;EAAA,aAEEC,KAFF;EAAA,IAElBC,eAFkB,UAElBA,eAFkB;EAAA,IAGjBC,aAHiB,GAGC,KAHD,CAGjBA,aAHiB;EAI3BN,KAAK,GAAG;IACNC,KAAK,EAAE,EADD;IAENC,YAAY,EAAE,EAFR;IAGNC,KAAK,EAAEI;EAHD,CAAR;EAKA,CAAgB,UAAAC,KAAK,EAAI;IACvB,IAAMP,KAAK,GAAGO,KAAK,CAACC,MAAN,CAAaC,KAA3B;IACAC,QAAQ,CAAC;MACPV,KAAK,EAAEA,KADA;MAEPE,KAAK,EAAEI;IAFA,CAAD,CAAR;IAIAK,WAAW,CAACX,KAAK,CAACY,IAAN,EAAD,CAAX;EACD,CAPD;EAQAD,WAAW,GAAGjB,QAAQ,CAAC,UAAAM,KAAK,EAAI;IAC9B,IAAI,CAACA,KAAL,EAAY;MACVU,QAAQ,CAAC;QAAET,YAAY,EAAE;MAAhB,CAAD,CAAR;MACA;IACD;;IACDN,QAAQ,CAACkB,MAAT,CAAgBb,KAAhB,EACGc,IADH,CACQ,UAAAC,KAAK,EAAI;MACb,IAAI,CAACA,KAAD,IAAUA,KAAK,CAACb,KAApB,EAA2B;QACzBQ,QAAQ,CAAC;UACPT,YAAY,EAAE,EADP;UAEPC,KAAK,EAAE;QAFA,CAAD,CAAR;QAIA;MACD;;MACDa,KAAK,GAAGA,KAAK,CAACC,GAAN,CAAU,UAAAC,IAAI,EAAI;QACxB,IAAMC,WAAW,GAAGf,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,UAAAC,CAAC;UAAA,OAAIA,CAAC,CAACC,EAAF,KAASL,IAAI,CAACK,EAAlB;QAAA,CAApB,CAApB;QACAL,IAAI,CAACM,KAAL,GAAaL,WAAW,GAAGA,WAAW,CAACK,KAAf,GAAuB,MAA/C;QACA,OAAON,IAAP;MACD,CAJO,CAAR;MAKFP,QAAQ,CAAC;QAAET,YAAY,EAAEc;MAAhB,CAAD,CAAR;IACC,CAfH,EAgBGS,KAhBH,CAgBS,UAAAC,GAAG,EAAI;MACZf,QAAQ,CAAC;QACPT,YAAY,EAAE,EADP;QAEPC,KAAK,EACH;MAHK,CAAD,CAAR;IAKD,CAtBH;EAuBD,CA5BqB,EA4BnB,GA5BmB,CAAtB,CAjB2B,CA8C3B;EACA;EACA;EACA;EACA;;EACE,oBACE;IAAK,SAAS,EAAC,cAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,kBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,IAAD;IAAM,SAAS,EAAC,cAAhB;IAA+B,EAAE,EAAC,GAAlC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,WADF,eAIE;IAAK,SAAS,EAAC,4BAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,QAAQ,EAAEG,aADZ;IAEE,KAAK,EAAEL,KAFT;IAGE,IAAI,EAAC,MAHP;IAIE,WAAW,EAAC,2BAJd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CAJF,CADF,eAcE;IAAK,SAAS,EAAC,sBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAI,SAAS,EAAC,YAAd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGC,YAAY,CAACyB,MAAb,GACGzB,YAAY,CAACe,GAAb,CAAiB,UAAAC,IAAI;IAAA,oBACnB,oBAAC,IAAD;MACE,eAAe,EAAEb,eADnB;MAEE,GAAG,EAAEa,IAAI,CAACK,EAFZ;MAGE,IAAI,EAAEL,IAHR;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADmB;EAAA,CAArB,CADH,GAQGjB,KAAK,IAAIE,KAAT,iBAAkB;IAAG,SAAS,EAAC,OAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAsBA,KAAtB,CATxB,CADF,CAdF,CADF,CAnDyB,CAiF3B;AACD,CAlFD;;AAmFCyB,UAAU,CAACC,SAAX,GAAuB;EACtBT,OAAO,EAAE3B,SAAS,CAACqC,KAAV,CAAgBC,UADH;EAEtB1B,eAAe,EAAEZ,SAAS,CAACuC,IAAV,CAAeD;AAFV,CAAvB;AAID,eAAeH,UAAf"},"metadata":{},"sourceType":"module"}